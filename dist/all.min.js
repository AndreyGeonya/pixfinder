!function(){"use strict";function t(t){return!("undefined"!=typeof t.naturalWidth&&0===t.naturalWidth)}function i(t){for(var i=0;i<t.length;i++)t[i]=Pixfinder.Util.Color.toRGB(t[i]);return t}function n(t){var i=document.createElement("canvas");return i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0,t.width,t.height),i}function e(t,i,n,e,u){for(var h=[],c=t.getContext("2d"),d={w:t.width,h:t.height},f=c.getImageData(0,0,d.w,d.h).data,l=0;l<f.length;l+=4*n){var _=[f[l],f[l+1],f[l+2],f[l+3]],g=o(l,f,{w:t.width,h:t.height}),p=r(l,d);(u||s(Pixfinder.Util.Color.areSimilar,g,_,e)!==!0)&&a(Pixfinder.Util.Color.areSimilar,_,i,e)&&h.push(p)}return h}function r(t,i){var n={x:0,y:0};return n.y=parseInt(t/(4*i.w)),n.x=t/4-n.y*i.w,n}function o(t,i,n){var e,o,s,a,u,h,c,d,f=[],l=r(t,n);return l.x>0&&l.y>0&&(e=t-4-4*n.w,f.push([i[e],i[e+1],i[e+2],i[e+3]])),l.y>0&&(o=t-4*n.w,f.push([i[o],i[o+1],i[o+2],i[o+3]])),l.x<n.w&&l.y>0&&(s=t-4*n.w+4,f.push([i[s],i[s+1],i[s+2],i[s+3]])),l.x<n.w&&(a=t+4,f.push([i[a],i[a+1],i[a+2],i[a+3]])),l.x<n.w&&l.y<n.h&&(u=t+4*n.w+4,f.push([i[u],i[u+1],i[u+2],i[u+3]])),l.y<n.h&&(h=t+4*n.w,f.push([i[h],i[h+1],i[h+2],i[h+3]])),l.x>0&&l.y<n.h&&(c=t+4*n.w-4,f.push([i[c],i[c+1],i[c+2],i[c+3]])),l.x>0&&(d=t-4,f.push([i[d],i[d+1],i[d+2],i[d+3]])),f}function s(t,i,n,e){for(var r=0;r<i.length;r++)if(t(n,i[r],e)===!1)return!1;return!0}function a(t,i,n,e){for(var r=0;r<n.length;r++)if(t(i,n[r],e)===!0)return!0;return!1}function u(t,i){for(var n,e=disjointSet(),r=0;r<t.length;r++){e.add(t[r]);for(var o=r;o>=0;o--)Pixfinder.Util.Math.getDistance(t[r],t[o])<=i&&(e.connected(t[r],t[o])||e.union(t[r],t[o]))}return n=e.extract(),e.destroy(),n}function h(t,i){return t.filter(function(t){return t.length>=i})}window.Pixfinder=function(r){var o=r;o.accuracy=o.accuracy||2,o.distance=o.distance||10,o.tolerance=o.tolerance||50,o.fill=o.fill||!1,o.clearNoise=o.clearNoise||!1,o.colors=i(o.colors),o.img="[object String]"===Object.prototype.toString.call(o.img)?document.getElementById(o.img):o.img;var s=function(){var t=n(o.img),i=e(t,o.colors,o.accuracy,o.tolerance,o.fill),s=u(i,o.distance),a=o.clearNoise?h(s,o.clearNoise):s;"undefined"!=typeof r.onload&&r.onload({objects:a})};t(o.img)?s():o.img.addEventListener("load",s,!1)},window.pixfinder=function(t){return new Pixfinder(t)}}(),function(){"use strict";function t(){return new i}var i=function(){this._reset()};i.prototype={add:function(t){var i=this._isPrimitive(t)?t:this._lastId;return"undefined"==typeof t._disjointSetId&&(t._disjointSetId=this._relations[i]=i,this._objects[i]=t,this._size[i]=1,this._lastId++),this},find:function(t){var i=this._isPrimitive(t)?t:t._disjointSetId;return this._findById(i)},_findById:function(t){for(var i=t;this._relations[i]!==i;)i=this._relations[i];return i},connected:function(t,i){return this.find(t)===this.find(i)?!0:!1},union:function(t,i){var n=this.find(t),e=this.find(i);return n===e?this:(this._size[n]<this._size[e]?(this._relations[n]=e,this._size[n]+=this._size[e]):(this._relations[e]=n,this._size[e]+=this._size[n]),this)},extract:function(){var t,i={},n=[];for(var e in this._relations)t=this._findById(e),"undefined"==typeof i[t]&&(i[t]=[]),i[t].push(this._objects[e]);for(var r in i)n.push(i[r]);return n},destroy:function(){this._reset()},_isPrimitive:function(t){return"undefined"!=typeof this.IS_PRIMITIVE?this.IS_PRIMITIVE:(this.IS_PRIMITIVE=i._isPrimitive(t),this.IS_PRIMITIVE)},_reset:function(){for(var t in this._objects)delete this._objects[t]._disjointSetId;this._objects={},this._relations={},this._size={},this._lastId=0}},i._isPrimitive=function(t){return"[object String]"===Object.prototype.toString.call(t)||"[object Number]"===Object.prototype.toString.call(t)?!0:!1},"function"==typeof define&&define.amd?define(function(){return t}):"undefined"!=typeof module?module.exports=t:window.disjointSet=t}(),Pixfinder.Util.Color={toRGB:function(t){var i=parseInt(t,16);return[i>>16,i>>8&255,255&i]},toHex:function(t){return(t[2]|t[1]<<8|t[0]<<16|1<<24).toString(16).slice(1)},areSimilar:function(t,i,n){var e=Math.abs(t[0]-i[0])<n,r=Math.abs(t[1]-i[1])<n,o=Math.abs(t[2]-i[2])<n;return e&&r&&o}},Pixfinder.Util.Math={getDistance:function(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))}},Pixfinder.Util={};