<!DOCTYPE html>
<html>
    <head>
        <title>Pixfinder - a JavaScript library for image analysis</title>
        <meta charset="utf-8" />
        <script src="../../src/Pixfinder.js"></script>
        <script src="../../src/Util/Util.js"></script>
        <script src="../../src/Util/Color.js"></script>
        <script src="../../src/Util/Math.js"></script>
        <script src="../../src/Struct/DisjointSet.js"></script>
    </head>
    <body>
        <img style="position:absolute; top: 0px; left:0px;" id="myImg" width="914" height="593" src="map1.png" crossOrigin="Anonymous"></img>
        <canvas style="position:absolute; top: 0px; left:0px;" id="canv" width="914" height="593" style="border:1px solid #d3d3d3;"></canvas>
        <script>
            window.onload = function () {
                var myImg = document.getElementById('myImg');
                var p = pixfinder({
                    img: myImg,
                    colors: [
                        'fbf9e7', // houses
                        'ddd9c7',
                        'd3def1',
                        'd3d3d3',
                        'f0d0c6',
                        'ecd5a3',
                        'd3d3d3',
                        '2c8cc3', // poi
                        '80ba9d',
                        'd48949',
                        'e56464'
                    ],
                    distance: 10,
                    tolerance: 3,
                    accuracy: 2,
                    fill: true,
                    onload: drawGeometries
                });

                function drawGeometries(e) {
                    var c=document.getElementById("canv");
                    var ctx=c.getContext("2d");
                    for (var i = 0; i < e.objects.length; i++) {
                        ctx.fillStyle = Pixfinder.Util.Color.toHex ([
                            Math.random() * 255,
                            Math.random() * 255,
                            Math.random() * 255
                        ]);
                        ctx.beginPath();
                        for (var j = 0; j < e.objects[i].length; j++) {
                            ctx.fillRect(e.objects[i][j].x, e.objects[i][j].y, 1, 1); 
                        }
                        ctx.fill();
                        ctx.closePath();
                    }
                }
            }
        </script>
    </body>
</html>