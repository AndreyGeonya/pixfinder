<!DOCTYPE html>
<html>
	<head>
		<title>Pixfinder - a JavaScript library for image analysis and feature extraction</title>
		<meta charset="utf-8" />
		<script src="src/P.js"></script>
		<script src="src/Util/Util.js"></script>
		<script src="src/Util/Color.js"></script>
		<script src="src/Util/Math.js"></script>
		<script src="src/Struct/Struct.js"></script>
		<script src="src/Struct/DisjointSet.js"></script>
		<script src="src/Func.js"></script>
	</head>
	<body>
		<img id="img"></img>
		<canvas id="canv" width="899" height="317" style="border:1px solid #d3d3d3;"></canvas>
		<script>
			window.onload = function () {
				var img = document.getElementById('img');

				img.onload = function () {
					var objColors = [
						'd4d4d4'
					];
					var features = P.getRegionsByColors(this, objColors, {
						accuracy: 3,
						dist: 15
					});

					var c=document.getElementById("canv");
					var ctx=c.getContext("2d");
					for (var i = 0; i < features.length; i++) {
						ctx.fillStyle = P.Util.Color.toHex ([
							Math.random() * 255,
							Math.random() * 255,
							Math.random() * 255
						]);
						ctx.beginPath();
						for (var j = 0; j < features[i].length; j++) {	
							ctx.arc(features[i][j].x, features[i][j].y, 1, 0, 2*Math.PI);
						};
						ctx.fill();
						ctx.closePath();
					};
				}

				img.crossOrigin = "Anonymous";
				img.src = 'img.png';
			}
		</script>
	</body>
</html>