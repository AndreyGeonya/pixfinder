<!DOCTYPE html>
<html>
	<head>
		<title>Pixfinder - a JavaScript library for image analysis and feature extraction</title>
		<meta charset="utf-8" />
		<script src="src/hex-rgb.js"></script>
		<script src="src/curry.js"></script>
		<script src="src/pixfinder.js"></script>
	</head>
	<body>
		<img id="img"></img>
		<canvas id="canv" width="256" height="256" style="border:1px solid #d3d3d3;"></canvas>
		<script>
			window.onload = function () {
				var img = document.getElementById('img');

				img.onload = function () {
					var objColors = [
						'd4d4d4',
						'b1b0b2',
						'b6b6b7',
						'b9b9ba',
						'c5c4c0',
						'a9a9ac',
						'ffffff',
						'ebebec',
						'adacaf',
						'b2b2b4',
						'f6f6f6',
						'f4f4f4',
						'd9d9d9',
						'cacacb',
						'c2c2c3',
						'ababae',
						'dedac8',
						'c5c2b4'
					];
					var features = PF.getFeatures(this, objColors);
					console.log(features.length);

					var c=document.getElementById("canv");
					var ctx=c.getContext("2d");
					for (var i = 0; i < features.length; i++) {
						ctx.fillStyle = toHex (
							Math.random() * 255,
							Math.random() * 255,
							Math.random() * 255);
						ctx.beginPath();
						for (var j = 0; j < features[i].length; j++) {	
							ctx.arc(features[i][j].x, features[i][j].y, 1, 0, 2*Math.PI);
						};
						ctx.fill();
						/*ctx.moveTo(features[i][0].x, features[i][0].y);
						for (var j = 1; j < features[i].length; j++) {
							ctx.lineTo(features[i][j].x, features[i][j].y);
						};
						ctx.stroke();*/
						ctx.closePath();
					};
				}

				img.crossOrigin = "Anonymous";
				img.src = 'img.png';
			}
		</script>
	</body>
</html>